# This file was generated by Chef for <%= node[:fqdn] %>
# Do NOT modify this file by hand!

# Configuration file for varnish
#
# /etc/init.d/varnish expects the variables $DAEMON_OPTS, $NFILES and $MEMLOCK
# to be set from this shell script fragment.
#

# Should we start varnishd at boot?
START=<%= node[:nmdvarnish][:start] %>

# Maximum number of open files (for ulimit -n)
NFILES=<%= node[:nmdvarnish][:nfiles] %>

# Maximum locked memory size (for ulimit -l)
MEMLOCK=<%= node[:nmdvarnish][:memlock] %>

# Default varnish instance name is the local nodename.
INSTANCE=<%= node[:nmdvarnish][:instance] %>


DAEMON_OPTS="-a <%= node[:nmdvarnish][:listen_address] %>:<%= node[:nmdvarnish][:listen_port] %> \
             -T <%= node[:nmdvarnish][:management_hostname] %>:<%= node[:nmdvarnish][:management_port] %> \
             -f <%= node[:nmdvarnish][:vcl_file] %> \
             -t <%= node[:nmdvarnish][:default_ttl] %> \
             -w <%= node[:nmdvarnish][:threads_min] %>,<%= node[:nmdvarnish][:threads_max] %>,<%= node[:nmdvarnish][:threads_timeout] %> \
             -S <%= node[:nmdvarnish][:secretfile] %> \
             -s <%= node[:nmdvarnish][:storage_type] %>,<%= node[:nmdvarnish][:storage_options] %>"
